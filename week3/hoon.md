# 5장. 인프라를 지탱하는 응용 이론
## Q5-1. 캐시에 대해 간단히 설명해주세요
- 캐시는 임시 저장소를 의미한다.
- 일부 데이터를 출력 위치와 가까운 지점에 일시적으로 저장한다.
- 데이터 재사용을 전제로 한다.

## Q5-1-2. 캐시의 장단점에 대해 설명해주세요
-  장점
	- 데이터에 고속으로 액세스할 수 있다.
	- 실 데이터에 대한 액세스 부하를 줄일 수 있다.

- 적합한 시스템
	- 참조 빈도가 높은 데이터
	- 캐시의 데이터가 손실되더라도 문제가 없는 시스템

- 부적합한 시스템
	- 데이터 갱신 빈도가 높은 시스템
	- 대량의 데이터에 액세스하는 시스템
	- 캐시 계층이 늘어나므로, 시스템 성능 문제나 데이터 불일치 문제가 발생한다.

## Q5-2. 폴링(Polling)에 대해 설명해주세요
- 정기적으로 질의하는 것을 의미한다.
- 다음과 같은 특징이 있다.
	- 질의 방향이 단방향이다.
	- 질의는 일정 간격을 따라 정기적으로 발생한다.
- 장점
	- 반복(루프)만 하면 되기에 프로그래밍이 쉽다.
	- 상대가 응답하는지 확인이 가능하다.
	- 모아서 일괄적으로 처리할 수 있다.

 - 적합한 처리
	 - 일정 간격으로 처리를 실행하면 좋은 처리
	 - 감시
 - 부적합한 처리
	 - 상태가 아닌 입력 내용에 따라 실행 내용을 변경하는 처리
	 - 처리 우선순위를 정해야 하는 처리

## Q5-3 저널링에 대해 설명해주세요
- 트랜잭션이나, 매일 갱신되는 데이터의 변경 이력을 가리킨다.
- 저널을 남겨두는 것을 저널링이라고 한다.

### 어디에 사용?
- 리눅스의 ext3 파일 시스템
	- 파일 I/O도 트랜잭션으로 간주된다.

- 적합한 시스템
	- 데이터 갱신이 발생하는 시스템
- 부적합한 시스템
	- 데이터 안정성보다 성능을 요구하는 시스템
		- 저널링을 하면 기록 처리 시에 오버헤드가 발생한다. - 성능을 중시하는 시스템이라면 이 오버헤드를 줄일 수 있는 방법을 검토해야한다.
		- 실 데이터가 다른 장소에 있는 서버에서는 부적합하다.

## Q5-3-2. 저널을 사용한 복구에 대해 설명해주세요?
- 롤백
	- 저널을 읽어서 실제 데이터 정보를 과거로 되돌리는 처리
- 롤 포워드
	- 저널을 읽어서 실제 데이터 정보를 앞으로 진행시키는 처리
	- 트랜잭션 단위로 실행된다.

- 저널 데이터는 메모리의 버퍼에 일단 저장된다.
- 디스크에 기록되지 않으면 장애 시 잃을 수 있다.
- 기록 빈도가 잦으면 오버헤드도 높아지기 때문에 절충해서 검토한다.
- 트랜잭션 도중 장애가 발생하면 종료되지 않은 트랜잭션은 파괴된다.

## Q5-4. 복제에 대해 설명해주세요
- 복제란?
- 주요 특징
	- 장애 시 데이터 손실을 예방할 수 있다.
	- 복제를 이용한 부하분산이 가능하다.

- 복제를 통해 데이터의 최종 복사본이 다른 곳에 생성

- 적합한 시스템
	- 데이터 손실을 허용하지 않고, 장애 시 복구 속도가 빨라야 하는 시스템
	- 데이터 참조와 갱신 부분이 나누어져 있으며, 참조가 많은 시스템

- 부적합한 시스템
	- 데이터 갱신이 많은 시스템
	- 경합 위험을 줄이기 위해 갱신은 한 곳에서 하는 것이 바람직하다.

## Q5-5. 마스터-워커에 대해 알고있나요?
- 명령하는 쪽과 명령을 받는 쪽의 관계
- 한 명이 관리자가 돼서 다른 모든 것을 제어하게 된다.

- 장점
	- 관리자가 한 명이기 때문에 구현이 쉽다
	- 워커 간 처리를 동기화할 필요가 없어 통신량이 줄어든다
- 단점
	- 마스터가 없어지면 관리가 불가능하다
	- 마스터의 부하가 높아진다

# 6장. 네트워크
## Q6-1. OSI 7계층과 HTTP 계층에 대해 설명해주세요
- OSI 7 계층
	- 어플리케이션 계층
	- 프리젠테이션 계층
	- 세션 계층
	- 전송 계층
	- 네트워크 계층
	- 데이터 링크 계층
	- 물리 계층
- HTTP 계층
	- 어플리케이션 계층(L7)
	- 전송 계층(L4)
	- ip 계층(L3)
	- 링크 계층/이더넷 계층(L2)

## Q6-2. HTTP 요청과 응답의 내용에 대해 간단히 설명해주세요
- 요청 시 중요한 것은 서버에 던지는 명령
	- 요청
	- 메시지/헤더
		- User-Agent
		- Cookie
	- 메시지/바디
		- 실 데이터 적재
- 이처럼 HTTP는 간단한 데이터의 형태를 가진다.
- 소켓에 기록된 데이터는, 다른 한쪽의 소켓으로 전달된다.
- 어플리케이션 자체가 통신 구조를 가지지 않고서도 원격지에 있는 서버 어플리케이션과 통신할 수 있다.

## Q6-2-2. keep-alive에 대해 설명해주세요
- http는 요청/응답 관계가 한번 끝나면 세션을 종료한다.
- 이로 인해 TCP 등의 계층에서 오버헤드가 발생한다.
- 단 시간 동안만 세션을 남겨두는 기능을 Keep-Alive라고 한다.
	- 웬 서버 측에 세션 잔존 시간 등을 설정한다.
- 프로토콜 헤더의 Connection의 Keep-Alive가 있으면 켜진 것이다.

## Q6-3. TCP의 역할이 무엇이고, TCP의 기능엔 무엇이 있나요?
- tcp의 역할은, 어플리케이션이 보낸 데이터를 그 형태 그대로 상대방에게 그대로 전달하는 것이다.
- TCP가 담당하는 것은 어디까지나 서버가 송신할 때와, 서버가 수신한 후 어플리케이션에게 전달할 때이다.
	- 상대 서버까지 전송하는 부분은 하위 계층인 IP 계층에 모두 위임한다.
- tcp의 기능에는
	- 포트 번호로 데이터를 전송
	- 연결을 생성
	- 데이터 보증, 재전송 제어
	- 흐름 제어, 폭주 제어

## Q6-4. TCP 연결 생성 과정에 대해 설명할 수 있나요?
- tcp는 연결형 프로토콜로, 연결이라 불리는 가상 경로를 생성한다.
	- 통신 상대인 서버 측 OS에게 가상 경로를 열도록 의뢰한다.
	- 서버 측에서 리슨하고 있는 포트 번호로 통신 요구가 온다.
	- 문제 없으면 열어도된다는 응답을 한다.
	- 클라이언트도 확인했다는 메세지를 보내며, 이떄 처음으로 통신용 가상 경로가 열린다.
		- 이 세번의 대화를 3-way handshaking이라 한다.

## Q6-5. TCP 흐름 제어와 폭주 제어에 대해 설명할 수 있나요?
- TCP 통신은 비동기적으로 동작한다.
- TCP는 어느 정도의 세그먼트 수라면 ACK를 기다리지 않고 전송하는 윈도우 개념을 가지고 있다.
- 윈도우의 종류에는
	- 수신 윈도우
	- 폭주(송신) 윈도우 가 있다.

- 흐름 제어
	- 기본 적으로는 수신 측이 윈도우 크기를 조정한다.
		- 수신과 송신 중 작은 쪽을 송신 윈도우로 채택한다.
		- 이 범위 내에서 ACK를 기다리지 않고 전송한다.
	- 수신 측은 수신용 소켓 버퍼가 넘쳐서, 더 이상 수신이 불가능하게되면 수신 윈도우 크기를 작게 만들고 이 사실을 송신 측에 알린다.

- 폭주 제어
	- 네트워크 혼잡 시, 폭주 윈도우 크기를 작게하여 전송 데이터 양을 줄인다.
	- 슬로우 스타트란?
		- 통신 시작시 1세그먼트에 설정
		- ACK 반환 시마다 폭주 윈도우의 크기를 2배씩 지수함수로 늘려나감