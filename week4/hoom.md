# Q1. ip계층의 역할이 무엇인지 알고있나요?
- 지정한 대상 서버까지 전달받은 데이터를 전달해주는 것
- IP 계층에서의 중요한 기능 2가지는
    - ip 주소를 이용해서, 최종 목적지에 데이터 전송
	- 라우팅(Routing)

# Q1-1. 커널 공간에서의 ip처리 흐름에 대해 간단히 설명해주세요
- ip계층에서는 최종 목적지가 적힌 ip 헤더를 tcp 세그먼트에 추가해서 ip 패킷을 생성한다.

# Q1-2. ip 헤더에는 무엇이 들어있나?
- 목적지 ip 주소 + 저장하고 있는 데이터 길이 + 프로토콜 종류(tcp 등)..
- 헤더 체크섬 등이 기록된다.

# Q2. 라우팅에 대해 간단히 설명해주세요
- ip는 경로 진행 도중에 다양한 처리가 이루어지는데, ip주소를 이용해서, 대상 서버를 지정할 수가 있습니다.
- 같은 네트워크가 아니라 다른 네트워크에 있는 경우, 최종 목적지를 알고있는 라우터에 전송을 부탁해야합니다.
	- ip 패킷을 받은 라우터는, 해당 ip패킷의 헤더에서 목적지를 확인합니다.
	  - 이때 사용되는 것이 라우팅 테이블입니다.
	- 외부와 접속하는 네트워크는 보통 기본 게이트웨이라는 라우터가 설치되어있습니다.

# Q2-1. 라우팅 테이블이 잘못되면 어떤 현상이 일어날 수 있나요? 이걸 방지하기 위해 어떤 정보가 있을까요?
- 라우팅 테이블이 잘못되었다면? 라우터 간에 패킷이 도착할 수 없기 때문에, 계속 왕복을 하게된다. 이게 지속되면 루핑이 발생하게 됩니다.
    - 이런 사태를 방지하기 위해 IP헤더의 TTL 정보를 가지고 있습니다. 라우터를 하나 경유 할때마다 TTL을 하나씩 깎게되는데, 0이되면 해당 패킷을 파기합니다.
    - 최대 64까지 설정할 수 있는데 64라우터를 거칠 일은 없습니다.

# Q3. 데이터 링크 계층(레이어2)의 대표적인 프로토콜에는 무엇이 있나요?
- 이더넷(ethernet)이 있습니다.

# Q3-1. 그렇다면 이더넷의 역할은 무엇인가요?
- 동일 네트워크 내의 네트워크 장비까지 전달받은 데이터를 운반하는 역할을 수행합니다.
	- OSI 7계층 모델의 물리 계층과 밀접한 관계가 있습니다.
    - 이더넷에서 전송되는 프레임인 이더넷 프레임은 전기 신호로 전송되는데, 따라서 전기 신호와 관련된 제어 기능 등 다양한 기능이 포함된다.

# Q3-2. ARP 테이블에 대해서 알고있나요?
- ip계층에서는 라우팅 테이블을 확인하므로, 어떤 링크(nic)가 패킷을 보낼지는 결정되어있습니다.
- 이더넷 헤더에는 MAC 주소를 목적지로 기입하게되는데, 이 MAC주소는 동일 링크내에 있는 장비의 주소입니다.
- ARP란 ip 주소로부터 MAC 주소를 구하는 IP와 MAC주소 사이의 다리 역할을 하는 프로토콜 입니다.
    - ARP를 통해 IP 주소를 실제 주소인 MAC주소로 변환합니다.

# Q3-3. MTU, MSS에 대해 알고있나요?
- MTU란?
	- 이더넷 등 해당 링크 계층에서 하나의 프레임으로 전송할 수 있는 최대 크기를 말합니다.
- MSS란?
	- TCP에서 최대로 전송할 수 있는 세그먼트의 크기를 말합니다.

# Q4. 왜 IP 패킷의 최대 크기를 MSS를 조절해서 맞추는 걸까요?
IP 패킷이 전달될 수 있는 여러 방식이 있기 때문입니다. 기본적으로 2가지 경우가 있을 수 있습니다.
- ip 패킷의 최대 크기가 MTU보다 작은 경우?
    - 하나의 패킷으로 전달할 수 있는 데이터의 크기가 작으므로,큰 데이터를 전달하기 위해서는 통신 횟수가 늘어난다.
        - 교환 횟수가 늘어나면 통신이 느려집니다.
- ip 패킷의 최대 크기가 MTU보다 큰 경우?
    - MTU에 담을 수 없는 ip패킷을 전송하려고 하는 경우에는 패킷을 분할해야합니다.
    - TCP에서도 여러 세그먼트로 분할하고, ip 계층에서도 분할이 이루어집니다. - 불필요한 처리 시간이 늘어난다.

또한 장비마다 MTU가 다를 수도 있습니다.
이렇듯 다양한 경우의 수에 맞추어, MSS를 조절해서 MTU를 조절해야합니다.

# Q5. 최종 목적지의 데이터 수신 확인 과정에 대해 설명해주세요.
간단히 말하면 NIC에 이더넷 프레임이 도착합니다.
- 일단 큐에 저장한 후, 커널에게 전달하고,
    - 버스를 통해 메모리로 전달합니다.
- 애플리케이션은 해당 소켓을 읽어 데이터를 추출한다.

NIC에 이더넷 프레임 도착하면 커널 단의 동작은 다음과 같습니다.
- NIC에 도착한 프레임은 헤더와 푸터 제거 후 IP 계층에 전달됩니다. (Layer2)
- IP 헤더를 확인하고, (Layer3)
	- 자신에게 온 패킷이 맞는지를 확인합니다.
	- 맞다면, IP 헤더를 제거한 후 TCP에게 전달합니다.
- TCP 헤더의 포트 번호를 확인 - 어떤 소켓으로 전달할 것인지 확인 (Layer4)
	- 필요한 세그먼트가 없을 시, 버퍼에서 대기한다.
- 도착한 세그먼트는 소켓의 수신 큐에 저장된다.
	- 어플리케이션의 읽기 요청이 있으면 전달한다.

---
# 복습 질문들
## Q1. HTTP 프로토콜의 종류에 대해 설명해줄 수 있나요?
HTTP는 어플리케이션 계층으로서, HTTP/1.0부터 현재는 HTTP/3을 사용하고 있습니다.
- HTTP/1.0
    - 기본적으로 한 연결당 하나의 요청을 처리하도록 설계
    - 패킷이 목적지에 도달하고, 다시 되돌아오는 시간이 길어지는 단점이 있었습니다.
        - 이를 해결하기 위해 이미지 분리, 인코딩, 압축 등 데이터를 효율적으로 전송하기 위한 해결방법을 강구했습니다.
    - 헤더에는 쿠키와 많은 메타데이터가 들어있어, 압축되지못해 무겁다는 단점도 있습니다.
- HTTP 2.0
    - HTTP/1.0보다 응답시간과 지연시간을 줄이도록 고안되었습니다.
    - 멀티플렉싱, 헤더 압축, 서버 푸시, 요청의 우선순위 처리 등을 지원합니다.
- HTTPS
    - HTTP/2는 HTTPS 위에서 동작합니다.
	- 어플리케이션 계층과, 전송 계층 사이에 신뢰 계층인 SSL/TLS 계층을 넣은 신뢰할 수 있는 HTTP 요청을 말합니다.

## Q1-2. 멀티플렉싱이란 무엇인가요?
여러 개의 스트림을 사용하여 송수신하는 것을 의미합니다.
특정 스트림의 패킷이 손실되더라도, 해당 스트림만 영향이 가고 나머지 스트림은 멀쩡히 동작할 수 있습니다.

## Q2. 운영체제 이중동작 모드에 대해서 알고있나요?
- 운영체제의 이중동작 모드는 운영체제를 보호하기 위한 기법입니다.
- 사용자와 운영체제는 커널을 공유하기 때문에, 제한이 없다면 운영체제의 자원을 망가뜨릴수도 있는 위험이 존재합니다.
    - 따라서 사용자의 시스템 자원에 제한을 걸 수 있는 보호장치가 필요한데, 이 보호장치를 이중동작 모드라고 합니다.

- 이중동작 모드는 커널 모드와 사용자 모드로 나누어집니다.
- 이 모드를 구분하기 위해서, 모드 비트(mode bit)라고 하는 비트가 동작하게 되고,
    - 커널 모드는 0, 사용자 모드는 1을 나타냅니다.
    - 권한이 높은 명령들은 커널 모드에서만 동작할 수 있도록 합니다.

## Q2-1. Exception에 대해 알고있나요?
- Exception은 동기적으로 발생하는 이벤트로서, 소프트웨어에서 발생하는 인터럽트를 Exception이라 합니다.
- 3가지 종류가 있는데,
    - Trap은 사용자가 의도적으로 발생시키는 것을 의미하며,
    - Fault는 문제가 있어서 발생하지만 복구가 가능하고,
    - Abort는 문제가 있어 발생하지만 복구가 불가능한 Exception을 말합니다.

## Q3. TCP/IP 계층구조에 대해 설명해주세요
1. 어플리케이션 계층(L7)
2. 전송 계층(L4)
3. ip 계층(L3)
4. 링크/이더넷 계층(L2)

## Q4. 병렬과 병행의 차이저멩 대해 설명해주세요
- 병행이란, concurrency로서 복수의 처리가 실행 상태에 있는 것을 말합니다.
    - 동시에 실행되는 것처럼 보인다.
    - 어떤 하나의 흐름에서, 2가지 이상의 작업을 나누어 실행한다.
- 병렬이란, parallel로서, 동시에 복수의 처리를 하는 것을 의미한다.
    - 실제로 동시에 실행되고 있는 것이다.
- 병행은 병렬이 아니나, 병행과 병렬은 같이 존재할 수 있다.

## Q5. OSI 7계층, TCP/IP 계층에 대해 말하고, 각 계층에 대해 간단하게 설명해주세요
- OSI 7계층은 다음과 같습니다.
    - 어플리케이션 계층(L7)
        - 사용자가 네트워크에 접근할 수 있는 실제 서비스를 제공합니다.
    - 프리젠테이션 계층(L6)
        - 세션 계층 간에 주고 받는 인터페이스를 제공합니다.
    - 세션 계층(L5)
        - 통신 시스템 사용자 간의 연결을 유지 및 설정합니다.
    - 전송 계층(L4)
        - 연결 시스템 간의 데이터 흐름을 제어합니다.
    - 네트워크 계층(L3)
        - 데이터를 목적지까지 전달하는 기능
        - 라우터를 통해 IP를 지정하고, 경로에 맞게끔 패킷을 전달합니다.
    - 데이터 링크 계층(L2)
        - 송/수신 되는 정보를 확인하고, 오류 없는 통신을 제공합니다.
        - mac주소를 통해서 통신합니다.
    - 물리 계층(L1)
        - 데이터를 전기적인 신호로 변환하여 주고받는 기능을 진행합니다.

- TCP/IP 프로토콜
    - 어플리케이션 계층(L7)
        - FTP, HTTP, SMTP등 다양한 프로토콜이 존재합니다.
        - osi에서는 L7~L5까지이며, 역시 네트워크에 접근할 수 있는 실제 서비스를 제공합니다.
    - 전송 계층(L4)
        - TCP 등의 프로토콜이 존재합니다.
        - 어플리케이션이 보낸 데이터를, 상대방 어플리케이션에 그대로 전달하는 역할을 수행합니다.
        - 연결을 생성하고, 데이터 보증, 흐름 제어 등을 수행합니다.
    - 네트워크 계층(L3)
        - IP, ARP
        - 데이터를 실제로 대상 서버까지 전달하는 역할을 수행한다.
        - IP 주소를 이용하여, 최종 목적지에 데이터를 전달합니다.
    - 링크 계층(L2)
        - 이더넷 프로토콜을 사용하여, 이더넷 패킷등을 사용하여 실제로 물리적으로 데이터를 이동시킵니다.

---

# 🍇 질문에는 나와있지 않은 공부 내용 정리
## IP주소를 이용한 최종 목적지로의 데이터 전송
- ip 주소는 32비트로 표현된 숫자 집합이다.
- 네트워크 주소부 + 호스트부
	- 네트워크부 : 어떤 네트워크인지를 가리킨다.
	- 호스트부 : 해당 네트워크 내에 있는 컴퓨터를 가리킨다.
- IP 주소 범위와 CIDR
	- IP 주소 중 호스트부의 비트가 모두 0인 것을 네트워크 주소, 모두 1인 것을 브로드캐스트 주소라고 한다.

## 동일 네트워크 내의 데이터 전송
- MAC 주소는 네트워크 통신을 하는 하드웨어에 할당된 주소
	- 원칙적으로는 모든 장비가 고유한 물리 주소를 가지고 있다.

## VLAN
- 네트워크를 구축할 때는 통신이 도달하는 범위를 생각해야 한다.
- 브로드캐스트 통신 등 전체에 데이터를 전송하는 경우는 불필요한 트래픽을 증가시킨다.
    - 브로드캐스트 통신이란, 송신 호스트가 전송한 데이터가 네트워크 연결된 모든 호스트에 전송하는 방식을 말한다.
- VLAN
	- 물리 구성에 의존하지 않고 가상적인 네트워크를 나누는 구조
	- 하나의 이더넷 케이블 내에서 다른 VLAN에 속하는 프레임을 전송할 수 있게 되어, 물리적으로 떨어져있는 네트워크 스위치라도 동일 네트워크에 참가시키는 것이 가능하다.
	- 태그 VLAN
		- VLAN ID의 태그를 붙여서, 하나의 물리 링크 내에서도 복수의 네트워크 이더넷 프레임을 처리할 수 있는 구조
		- 하나의 이더넷 케이블 내에서 다른 VLAN에 속하는 프레임을 전송할 수 있게 되어, 물리적으로 떨어져있는 네트워크 스위치라도 동일 네트워크에 참가시키는 것이 가능하다.