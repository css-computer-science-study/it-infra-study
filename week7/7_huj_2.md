# DB 서버 이중화
## 서버 이중화 (액티브-스탠바이)
클러스터 소프트웨어는 등록된 서비스가 정상 동작하고 있는지 정기적으로 확인해서, 이상이 발생하면 서비스를 정지하고 대기하고 있던 스탠바이 측 서비스를 시작해서 서비스를 유지시킨다.


### HA (High Availability, 고가용성) 구성
클러스터의 노드나 서비스 관계는 마스터-워커 개념을 기반으로 하고 있다.
서버가 정상 동작하는지 확인하기 위한 구조로 하트비트나 투표 장치 같은 기능이 존재.

### 클러스터 구성용 서비스
클러스터 소프트웨어를 이용하는 액티브-스탠바이 구성은 서비스를 병렬로 실행할 수 없고 데이터 일관성을 중시하는 서비스/시스템에 적합하다. (예로 데이터베이스, 파일 서버, 잡 관리 시스템)
따라서 데이터 갱신이 거의 없어서 데이터 일관성이 중시되지 않고, 서비스 병렬 실행이 가능한 웹 서버나 AP 서버에서는 클러스터 소프트웨어를 사용하지 않는다.

## 서버 이중화 (액티브-액티브)
### Shared Everything

디스크, 데이터를 모든 노드가 공유한다.
장애가 발생하도 다른 노드로 쉽게 처리를 계속할 수 있다.

### Shared Nothing

각 노드별로 디스크를 가지고 있어서 데이터가 분산된다.
노드를 배치하기 쉽다.

# 네트워크 장비 이중화

# 사이트 이중화


# 감시
시스템 컴포넌트가 정상 동작하는지 확인하는 기능.

종류
생존 감시
로그 (에러) 감시
성능 감시

3-1. 생존 감시
ping 명령을 정기적으로 실행해서 서버 인터페이스에 대한 통신을 확인하는 감시
ping 감시는 가능한 모든 장비에 설정할 것을 권장한다.
 

3-2. 로그 감시
OS나 미들웨어가 출력하는 로그 파일에는 시스템 유지를 위한 중요 정보가 포함돼 있다.
미들웨어 오류나 영역 고갈 등 생존 감시로는 알 수 없는 정보가 로그 파일로 출력된다.
또한 장애 원인 분석에도 도움이 된다.
 

3-3. 성능 감시
디스크 사용률이나 메모리 사용 현황, 디스크 고갈 등의 리소스 상태 파악과 네트워크 액세스 지연, 디스크 액세스 시간 등의 응답 시간을 파악하는 것.
 

# 백업
데이터를 복제해서 별도 장소에 보관하는 것.
복원이나 복구를 이용해서 데이터를 원래 장소로 되돌리는 과정이 필요하다.

복구 지표
RTO (Recovery Time Objective): 복구 목표 시간
복구에 어느 정도 시간이 걸리나?

RPO (Recovery Point Objective): 복구 기준 시점
어느 시점을 복구할 것인가?

시스템 백업
OS나 미들웨어 등 일반 서버의 로컬 디스크 영역을 백업하는 것.

데이터 백업
데이터베이스 백업은 데이터 자체와 데이터 갱신 내용이 기록돼 있는 저널을 모두 취득하도록 하고 있다.
데이터베이스가 망가진 경우라면 일관성 있는 데이터와 저널 로그 양쪽을 복원한다.
일관성 있는 데이터에 대해 저널 로그를 바탕으로 다시 트랜잭션을 실행해서 복구한다.
또한, 백업되지 않은 저널 로그가 장애 발생 직전까지 존재한다면 최신 데이터로 복구할 수 있다.
